<!-- To show list of students and teachers tab for both users -->
{% extends 'base.html' %}

{% load static %}
{% block extracss %}
<link rel="stylesheet" type="text/css" href="{% static 'datatables/dataTables.bootstrap4.min.css' %}">
{% endblock %}

{% block content %}
<h2 class="mb-3">{% if page == "1" %}Students{% else %}Teacher{% endif %}</h2>

<table id="userlist" class="table table-striped table-bordered" style="width:100%">
  <thead>
    <tr>
      <th>Username</th>
      <th>Email</th>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Is Verified</th>
      <th>Joined On</th>
      <th>Class</th>
    </tr>
  </thead>
  <tbody>
    {% for user in users %}
    <tr{% if not user.is_staff %} style="color: red"{% endif %}>
      <td>{{user.username}}</td>
      <td>{{user.email}}</td>
      <td>
        {% if user.first_name %}
          {{user.first_name}}
        {% else %}
          -
        {% endif %}
      </td>
      <td>
        {% if user.last_name %}
          {{user.last_name}}
        {% else %}
          -
        {% endif %}
      </td>
      <td>
        {% if user != request.user %}
          <form method="post">
          {% csrf_token %}
          <input type="hidden" name="user" value="{{user.id}}">
          <input type="checkbox" name="verified"{% if user.is_staff %} checked{%endif%}>
          <button type="submit" class="btn btn-primary btn-sm">save</button>
          </form>
        {% endif %}
      </td>
      <td>{{user.date_joined|date:"d M Y"}}</td>
      {% if page == "1" %}
        <td>{{user.student.classroom.name}}</td>
      {% else %}
        <td>{% for classroom in user.classroom_set.all %}{{classroom.name}}{% endfor %}</td>
      {% endif %}
    </tr>
    {% endfor %}
  </tbody>
</table>
<!-- 
<div class="card-columns">
{% for user in users %}
  <div class="card{% if not user.is_staff %} border-danger{% endif %}">
    <div class="card-body{% if not user.is_staff %} text-danger{% endif %}">
      <h5 class="card-title">{{user.username}}</h5>
      <ul class="list-group list-group-flush">
      {% if user.email %}
        <li class="list-group-item">email: <small><strong>{{user.email}}</strong></small></li>
      {% endif %}
      {% if user.first_name %}
        <li class="list-group-item">first name: {{user.first_name}}</li>
      {% endif %}
      {% if user.last_name %}
        <li class="list-group-item">last name: {{user.last_name}}</li>
      {% endif %}
        <li class="list-group-item">active: {{user.is_active}}</li>
        <li class="list-group-item">date joined: <small>{{user.date_joined|date:"d M Y"}}</small></li>
      {% if user != request.user %}
        <li class="list-group-item">
          <form method="post">
          {% csrf_token %}
          <input type="hidden" name="user" value="{{user.id}}">
          is verified: <input type="checkbox" name="verified"{% if user.is_staff %} checked{%endif%}>
          <button type="submit" class="btn btn-primary btn-sm">save</button>
          </form>
        </li>
      {% endif %}
      </ul>
      
      <p class="card-text"><small class="text-muted">Last login {{user.last_login}}</small></p>
    </div>
  </div>
{% endfor %}
</div> -->
{% endblock %}

{% block extrajs %}
<script src="{% static 'datatables/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'datatables/dataTables.bootstrap4.min.js' %}"></script>
<script type="text/javascript">
$(document).ready(function() {
    $('#userlist').DataTable();
});
</script>
{% endblock %}
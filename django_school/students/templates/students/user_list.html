<!-- To show list of students and teachers tab for both users -->
{% extends 'base.html' %}

{% load static %}
{% block extracss %}
<link rel="stylesheet" type="text/css" href="{% static 'datatables/dataTables.bootstrap4.min.css' %}">
{% endblock %}

{% block content %}
{% if page == "1" %}{% include 'students/_header.html' with active='student_list' %}{% endif %}

<table id="userlist" class="table table-striped table-bordered" style="width:100%">
  <thead>
    <tr>
      <th>Username</th>
      <th>Email</th>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Is Verified</th>
      <th>Joined On</th>
      <th>Class</th>
    </tr>
  </thead>
  <tbody>
    {% for user in users %}
    <tr{% if not user.is_staff %} style="color: red"{% endif %}>
      <td>{{user.username}}</td>
      <td>{{user.email}}</td>
      <td>
        {% if user.first_name %}
          {{user.first_name}}
        {% else %}
          -
        {% endif %}
      </td>
      <td>
        {% if user.last_name %}
          {{user.last_name}}
        {% else %}
          -
        {% endif %}
      </td>
      <td>
        {% if user != request.user %}
          <form method="post">
          {% csrf_token %}
          <input type="hidden" name="user" value="{{user.id}}">
          <input type="checkbox" name="verified"{% if user.is_staff %} checked{%endif%}>
          <button type="submit" class="btn btn-primary btn-sm">save</button>
          </form>
        {% endif %}
      </td>
      <td>{{user.date_joined|date:"d M Y"}}</td>
      {% if page == "1" %}
        <td>{{user.student.classroom.name}}</td>
      {% else %}
        <td>{% for classroom in user.classroom_set.all %}{{classroom.name}}{% endfor %}</td>
      {% endif %}
    </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}

{% block extrajs %}
<script src="{% static 'datatables/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'datatables/dataTables.bootstrap4.min.js' %}"></script>
<script type="text/javascript">
$(document).ready(function() {
    $('#userlist').DataTable();
});
</script>
{% endblock %}
{% extends 'base.html' %}

{% load static %}
{% load crispy_forms_tags %}

{% block extracss %}
<link href="{% static 'airdatepicker/datepicker.min.css' %}" rel="stylesheet" type="text/css">
{% endblock %}

{% block content %}
{% include 'classroom/_header.html' with active='attendance' %}
<!-- <form>
  <div class="form-row">
    <div class="form-group col-md-4">
      <label>Classroom</label>
      <select class="form-control">
        <option selected>Choose...</option>
        <option>...</option>
      </select>
  	</div>

    <div class="form-group col-md-4">
      <label>Date</label>
      <input type='text' id="attendancedate" class='form-control' data-language='en'/>
    </div>
    <div class="form-group col-md-4">
    	<br>
    	<button type="submit" class="btn btn-primary">Enter Attendance</button>
    </div>
  </div>
</form> -->

{% for classroom in classrooms %}
{{att_classroom}} {{classroom.pk}}
  ss{% if classroom.pk == att_classroom %} selected {{ classroom.name }}{% endif %}
{% endfor %}
<form class="form-inline">
  <div class="form-group mb-2">
    <label class="sr-only">Classroom</label>
    <select class="form-control" name="classroom">
        <option value="">Select Class</option>
        {% for classroom in classrooms %}
        	<option value="{{ classroom.pk }}"{% if classroom.pk == att_classroom %} selected{% endif %}>{{ classroom.name }}</option>
        {% endfor %}
    </select>
  </div>
  <div class="form-group mx-sm-3 mb-2">
    <label class="sr-only">Date</label>
    <input name="date" type='text' id="attendancedate" placeholder="Date" class='form-control' data-language='en' autocomplete="off" value="{{att_date}}" />
  </div>
  <button type="submit" class="btn btn-primary mb-2">Enter Attendance</button>
</form>

{% if periods %}
<table class="table table-striped table-bordered" style="width:100%">
  <thead>
    <tr> <th>Period</th><th>Subject</th><th>Status</th><th></th> </tr>
  </thead>
  <tbody>
  	
    {% for period in periods %}
    <tr>
	    <td>{{ forloop.counter }}</td>
	    <td>{{period.subject.name}}</td>
	    <td class="p-3 mb-2 bg-danger text-white">Not Marked</td>
	    <td>
          <a class="btn btn-primary" href="#" role="button">Enter Attendance</a>
          <a class="btn btn-secondary" href="#" role="button">Edit Attendance</a>
          <a class="btn btn-warning" href="#">Cancel Class</>
      </td>
	    {% comment %}
	    {% if a.status == 0 %}
	        <td class="p-3 mb-2 bg-danger text-white">Not Marked</td>
	        <td>
	            <a class="btn btn-primary" href="{% url 't_attendance' a.id %}" role="button">Enter Attendance</a>
	            <a class="btn btn-warning" href="{% url 'cancel_class' a.id %}">Cancel Class</>
	        </td>

	    {% elif a.status == 1 %}
	        <td class="p-3 mb-2 bg-success text-white">Marked</td>
	        <td><a class="btn btn-secondary" href="{% url 'edit_att' a.id %}" role="button">Edit Attendance</a> </td>

	    {% else %}
	        <td class="p-3 mb-2 bg-warning text-white">Cancelled</td>
	        <td><a class="btn btn-primary" href="{% url 't_attendance' a.id %}" role="button">Enter Attendance</a></td>
	    {% endif %}
	    {% endcomment %}
	   </tr>
    {% endfor %}
    
  </tbody>
</table>
{% endif %}

{% endblock %}

{% block extrajs %}
<script src="{% static 'airdatepicker/datepicker.min.js' %}"></script>
<script src="{% static 'airdatepicker/datepicker.en.js' %}"></script>
<script type="text/javascript">
	$(document).ready(function () {
		$('#attendancedate').datepicker({
	        dateFormat: "dd/mm/yyyy",
	        autoClose: true,
	        onRenderCell: function (date, cellType) {
		        if (cellType == 'day') {
		            var day = date.getDay(),
		                isDisabled = [0, 6].indexOf(day) != -1;
		            return {
		                disabled: isDisabled
		            }
		        }
		    }
    	});
    });
</script>
{% endblock %}